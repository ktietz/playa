<!DOCTYPE html>
<html>
<head>
    <title>View Navigator Sample</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    <script src="js/jquery-1.7.1.js"></script>
    <script src="js/app-ui/jquery.animate-enhanced.js"></script>
    <script src="js/app-ui/iscroll.js"></script>
    <script src="js/app-ui/noClickDelay.js"></script>

    <link rel='stylesheet' type='text/css' href='fullcalendar/fullcalendar.css' />
    <script type='text/javascript' src='fullcalendar/jquery.js'></script>
    <script type='text/javascript' src='fullcalendar/fullcalendar.js'></script>

    <link rel="stylesheet" href="css/viewnavigator.css" type="text/css" />
    <link rel="stylesheet" href="css/index.css" type="text/css" />
    <script src="js/app-ui/viewnavigator.js"></script>

    <script>
        // jQuery Address Event handlers
//        $.address.externalChange(function(event) {
//            var text = event.value.substr(1);
//
//            if ( text.length > 0 ) {
//                loadView( text );
//                window.defaultView.find("a").each(function(i){
//                    var $this = $(this);
//                    if ($this.text() == text ) {
//                        $this.addClass( "listSelected" );
//                    }
//                });
//                $(this).addClass( "listSelected" );
//            }
//            else {
//                resetList();
//                window.viewNavigator.popView();
//                $.address.value("");
//            }
//        });

        $(document).ready( function() {

            //Setup the default view
            var defaultView = getView('./main.html');
            defaultView.backLabel = null;

            //Setup the ViewNavigator
            window.viewNavigator = new ViewNavigator( 'body' );
            window.viewNavigator.pushView( defaultView );

//            $('.mainMenu a').click(pushView(this.href));


                // put your options and callbacks here
            })
        } );

        function pushView(viewPath) {
            //create a view and push it onto the view navigator
            var view = getView(viewPath);
            window.viewNavigator.pushView( view );
        }

        function popView() {
            //pop a view from the view navigator
            window.viewNavigator.popView();
        }

        function getView(viewPath) {
            //create a view descriptor with random content
            var bodyView = $('#wrap').load(viewPath);
            var links = bodyView.find('a');

            return { title: "Playa",
                backLabel: "Back",
                view:  bodyView
            };
        }

        function pushViewMap(){
            // Enable the visual refresh
            google.maps.visualRefresh = true;

            var map;
            var mapHtml;
            function initialize() {

                var mapOptions = {
                    zoom: 8,
                    center: new google.maps.LatLng(-34.397, 150.644),
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                };
                map = new google.maps.Map(document.getElementById('wrap'),
                        mapOptions);
            }

            google.maps.event.addDomListener(window, 'load', initialize);
            var view = $('#wrap');

            window.viewNavigator.pushView( view );

        }

        function getMeat() {
            //randomly generate content
            //text string generated by http://baconipsum.com/
            var iterations = 1 + parseInt(Math.random() * 25);
            var result = "";
            for ( var i = 0; i < iterations; i ++ ) {
                result += "Pork chop corned beef meatloaf prosciutto flank, chuck andouille fatback hamburger cow ham turkey. Drumstick filet mignon boudin, salami beef ribs ball tip turducken frankfurter chuck. Pork chop swine chuck meatloaf capicola tri-tip. Pork belly venison bresaola flank, jerky ham hock short loin ground round corned beef salami pork filet mignon tri-tip sirloin. Tenderloin meatball corned beef, boudin brisket bresaola rump short loin tri-tip spare ribs pork belly cow.<hr>"
            }
            return result;
        }

//        // Enable the visual refresh
//        google.maps.visualRefresh = true;
//
//        var map;
//        function initialize() {
//            var mapOptions = {
//                zoom: 8,
//                center: new google.maps.LatLng(-34.397, 150.644),
//                mapTypeId: google.maps.MapTypeId.ROADMAP
//            };
//            map = new google.maps.Map(document.getElementById('map-canvas'),
//                    mapOptions);
//        }
//
//        google.maps.event.addDomListener(window, 'load', initialize);

    </script>

</head>
<body>
    <div id="wrap"></div>
</body>
</html>
